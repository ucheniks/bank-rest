# Bank Cards Management System

REST API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Java 21** + **Spring Boot 3.3.2**
- **Spring Security** + JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **PostgreSQL** + Liquibase –º–∏–≥—Ä–∞—Ü–∏–∏
- **Docker** + Docker Compose
- **Swagger/OpenAPI 3.0** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **JaCoCo** - –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–æ–ª–∏
- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –†–æ–ª–∏: **ADMIN** –∏ **USER**

### üë®‚Äçüíº –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –°–æ–∑–¥–∞–Ω–∏–µ, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, –∞–∫—Ç–∏–≤–∞—Ü–∏—è, —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–∞—Ä—Ç —Å–∏—Å—Ç–µ–º—ã
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∫–∞—Ä—Ç

### üë§ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –∫–∞—Ä—Ç —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –ü–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å–≤–æ–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏
- –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∫–∞—Ä—Ç
- –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞ 

### üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç (AES)
- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- –†–æ–ª–µ–≤–æ–π –¥–æ—Å—Ç—É–ø –∫ API
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üèÉ‚Äç‚ôÇÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Java 21+
- Docker & Docker Compose
- Maven 3.6+

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone <repository-url>
cd bank-rest
```
2. **–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫**
```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
mvn clean package

# –ó–∞–ø—É—Å–∫ –≤ Docker
docker-compose up --build
```
3. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:**
- API: http://localhost:8080

## üë• –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

–°–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- **Email:** admin@mail.ru
- **–ü–∞—Ä–æ–ª—å:** admin123
- **–†–æ–ª—å:** ROLE_ADMIN

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **Email:** user@mail.ru
- **–ü–∞—Ä–æ–ª—å:** user123
- **–†–æ–ª—å:** ROLE_USER

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|-----------|
| POST | `/auth/login` | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É |

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ö–∞—Ä—Ç—ã
| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|-----------|
| GET | `/user/cards` | –ú–æ–∏ –∫–∞—Ä—Ç—ã (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ —Å—Ç–∞—Ç—É—Å—É) |
| GET | `/user/cards/{cardId}` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞—Ä—Ç–µ |
| GET | `/user/cards/{cardId}/balance` | –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã |
| POST | `/user/cards/{cardId}/block-request` | –ó–∞–ø—Ä–æ—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫–∞—Ä—Ç—ã |

#### –ü–µ—Ä–µ–≤–æ–¥—ã
| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|-----------|
| POST | `/user/transfers` | –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏ |
| GET | `/user/transfers` | –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ |

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|-----------|
| GET | `/admin/users` | –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ |
| GET | `/admin/users/{userId}` | –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID |
| POST | `/admin/users` | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| DELETE | `/admin/users/{userId}` | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

#### –ö–∞—Ä—Ç—ã
| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|-----------|
| GET | `/admin/cards` | –í—Å–µ –∫–∞—Ä—Ç—ã (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π) |
| GET | `/admin/cards/{cardId}` | –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ä—Ç—É –ø–æ ID |
| POST | `/admin/cards/user/{userId}` | –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| PATCH | `/admin/cards/{cardId}/block` | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã |
| PATCH | `/admin/cards/{cardId}/activate` | –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–∞—Ä—Ç—ã |
| PATCH | `/admin/cards/{cardId}/approve-block` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ |
| DELETE | `/admin/cards/{cardId}` | –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã |

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- **cards** - –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã (–Ω–æ–º–µ—Ä–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã)
- **transfers** - –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏
- **block_requests** - –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∫–∞—Ä—Ç

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
### –£–¥–∞–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π
#### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:
- –°—Ç—Ä–æ–≥–æ–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¢–ó —Ç—Ä–µ–±–æ–≤–∞–ª–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ CRUD —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- –í —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–Ω–∫–æ–≤—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å soft delete —Å —Ñ–ª–∞–≥–∞–º–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ —Ä–∞–±–æ—Ç—ã —Å JPA/Hibernate


## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
mvn test

# –¢–µ—Å—Ç—ã —Å –æ—Ç—á–µ—Ç–æ–º –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
mvn test jacoco:report

# –û—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤:
# target/site/jacoco/index.html
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–ª—é—á–µ–≤–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤: ~70-80%

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ application.yml:

- –ü–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: 8080
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL
- JWT —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
- –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ä—Ç